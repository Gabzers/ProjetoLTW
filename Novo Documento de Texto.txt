ocument.getElementById('registerForm').addEventListener('submit', function(event) {
  event.preventDefault();

  const loginInput = document.getElementById('login');
  const login = loginInput.value;
  const typeSelect = document.querySelector('[name="type"]');
  const type = typeSelect.value;
  const nifInput = document.getElementById('nif'); // Assuming the NIF input has this ID
  const nif = nifInput.value;

  // Check user type selection
  if (type === '0') {
      alert('Por favor, selecione o tipo de utilizador.');
      return;
  }

  // NIF validation using regular expression
  const nifRegex = /^\d{9}$/; // Matches exactly 9 digits
  if (!nifRegex.test(nif)) {
      alert('NIF inválido. O NIF deve conter apenas 9 dígitos.');
      return; // Prevent form submission if NIF is invalid
  }

  // Verifica o login
  checkLogin(login)
      .then(loginExists => {
          if (loginExists) {
              alert('Este login já está em uso.');
          } else {
              const loginErrorElement = document.getElementById('loginError');
              if (loginErrorElement) {
                  loginErrorElement.textContent = ''; // Limpa mensagens de erro anteriores
              }
              alert('Conta criada com sucesso.');

              setTimeout(function() {
                  document.getElementById('registerForm').submit();
              }, 100);

              // Espera 0.3 segundos antes de redirecionar
              setTimeout(function() {
                  window.location.href = 'a_users.html';
              }, 100);
          }
      })
      .catch(error => console.error('Erro ao verificar login:', error));
});